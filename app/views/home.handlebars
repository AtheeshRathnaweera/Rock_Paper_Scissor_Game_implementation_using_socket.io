<p>this is the home page </p>

<script src="https://cdn.socket.io/3.1.3/socket.io.min.js"
  integrity="sha384-cPwlPLvBTa3sKAgddT6krw0cJat7egBga3DJepJyrLl4Q9/5WLra3rrnMcyTyOnh" crossorigin="anonymous"></script>

<script>
  var URL = "{{server_url}}";
  var USER_NAME = "{{session.user_name}}";
  var CONNECTION_ID = '';

  var socket = io(URL, {
    query: {
      user_name: USER_NAME
    },
    reconnection: true,
    reconnectionAttempts: 10
  });

  socket.auth = { username: USER_NAME };
  socket.connect();

  socket.on("connect", () => {
    console.log("new socket id : " + socket.id);
    
    CONNECTION_ID = socket.id;
  });

  // handle the event sent with socket.emit()
  socket.on("greetings", (message) => {
    console.log("greetings : " + message);
  });

  socket.on("connect_error", (err) => {
    console.log("connection error " + err.message);
  });

  socket.on("disconnect", () => {
    console.log("disconnected"); // undefined
  });

</script>